{% extends "base.html" %}
{% block content %}
<h3>All Students</h3>
<form method="get" class="mb-3">
  <input type="text" name="q" value="{{ q }}" placeholder="Search..." class="form-control w-25 d-inline">
  <button class="btn btn-secondary">Search</button>
  <a href="{{ url_for('export_csv') }}" class="btn btn-success">Export CSV</a>
</form>
<table class="table table-bordered">
  <tr><th>ID</th><th>Name</th><th>Roll</th><th>Class</th><th>Phone</th><th>Email</th><th>Actions</th></tr>
  {% for s in students %}
  <tr>
    <td>{{ s.id }}</td><td>{{ s.name }}</td><td>{{ s.roll }}</td>
    <td>{{ s.class }}</td><td>{{ s.phone }}</td><td>{{ s.email }}</td>
    <td>
      <a href="{{ url_for('edit_student', id=s.id) }}" class="btn btn-sm btn-primary">Edit</a>
      <form method="post" action="{{ url_for('delete_student', id=s.id) }}" style="display:inline;" onsubmit="return confirm('Delete?');">
        <button class="btn btn-sm btn-danger">Delete</button>
      </form>
    </td>
  </tr>
  {% endfor %}
</table>
{% endblock %}
